sshfu: ~/.ssh/config manager.

This script provides an alternative line-by-line syntax for ~/.ssh/config that is a little easier on the eyes.

When you have more than two hosts on you configuration it gets a little verbose for simple things, and here is where this syntax helps.

This is what the syntax looks like:

host server address server.test user root
host grimalkin address 192.168.1.1 gw server user cmad
host vm1 address 10.10.1.1 gw grimalkin

And this what it will compile into:

Host server
  HostName server.test
  User root

Host grimalkin
  HostName 192.168.1.1
  ProxyCommand ssh server -W %h:%p
  User cmad

Host vm1 
  HostName 10.10.1.1
  ProxyCommand ssh grimalkin -W %h:%p

If it finds an already existing ~/.ssh/config, it will make a copy on ~/.ssh/original_ssh_config, and try to import your configuration.

sshfu will fire $EDITOR on ~/.ssh/sshfu/routes and when you exit, compile the resulting configuration along with ~/.ssh/sshfu/ssh_config.head and ~/.ssh/sshfu/ssh_config.tail into your actual ~/.ssh/config.

It shouldn't do any harm to say but, this script is garbage-in garbage-out, which means, if yo put a typo in the sshfu config file, expect one in your ~/.ssh/config

Maybe latter I will provide some options, like re-import from ~/.ssh/config, make it more clean, etc. For the time being, it's just something I use, and hopefully it maybe of some use to you.

EDIT: Some of us are actually using it at work, and now is a tcl script, also we are using it to dinamically
choose gateway if for example we are at home and need to reach a server. It can also detect cycles.

EDIT2: Now you can have inside, or, otherwise and 'with' keywords, inside matches against a CONTEXT variable
and is usefull for changing gateways or projects for example, with 'with' you can apply defaults to a block,
and you can put tags, so that you can parse the sshfu routes as documentation, or group them for diagrams.

inside home or public {
  with gw office_firewall {
    host foo address 192.168.5.4
    bla bla bla
  }
} otherwise {
  host foo address 192.168.5.4 tag webserver
  bla bla bla

  with tag blah blah{
    blah blah blah
  }
}

Bye.
